<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="BtTableDAO" >

	<insert id="inserBtUserInfo">
		insert into bt_user_info 
			(user_sn , account , pwd , user_nick , mobile , user_desc , head_img_url , j_point , coupon , reward_mount , used_reward_amt ,
			attention_nums , follower_nums , favouite_nums , user_type , sex , address , id_no , way , write_date , head_qiniukey , is_active , 
			user_token , user_role , user_sub_role , user_third_type , open_id , union_id , device_type , play_guide_video , invite_code , client_device_no ,
			is_invited , is_tester , is_navy , is_gag , is_vip , vip_out_dt , is_manager , total_invite_num , remain_invite_num , is_np 
			)
		select 
			u.user_sn , u.account , u.pwd , u.user_nick , u.mobile , u.user_desc , u.head_img_url , u.j_point , u.coupon , u.reward_mount , u.used_reward_amt ,
			u.attention_nums , u.follower_nums , u.favouite_nums , u.user_type , u.sex , u.address , u.id_no , u.way , u.write_date , u.head_qiniukey , u.is_active , 
			u.user_token , u.user_role , u.user_sub_role , u.user_third_type , u.open_id , u.union_id , u.device_type , u.play_guide_video , u.invite_code , u.client_device_no ,
			u.is_invited , u.is_tester , u.is_navy , u.is_gag , u.is_vip , u.vip_out_dt , u.is_manager , u.total_invite_num , u.remain_invite_num , u.is_np
		from u_user_info u where not exists( select 1 from bt_user_info bu where bu.user_sn = u.user_sn ) 
	</insert>
	
	<insert id="insertBtClientInfo">
		insert into bt_client_info 
			(ci_id , account , client_type , client_brand , client_channel , client_model , client_system_no , client_device_no , 
			client_version , client_ip , create_dt , is_np , is_gag 	
			)
		select 
			c.ci_id , c.account , c.client_type , c.client_brand , c.client_channel , c.client_model , c.client_system_no , c.client_device_no , 
			c.client_version , c.client_ip , c.create_dt , c.is_np , c.is_gag 	
		from c_client_info c where not exists(select 1 from bt_client_info bc where bc.ci_id = c.ci_id)
	</insert>

	<update id="updateBtClientInfo">
		update bt_client_info bc , c_client_info c 
		set bc.client_brand 	= c.client_brand 		, bc.client_type 		= c.client_type 		, bc.client_device_no 	= c.client_device_no 	,
			bc.client_channel 	= c.client_channel 		, bc.client_device_no 	= c.client_device_no 	, bc.client_model 		= c.client_model 		, 
			bc.client_system_no = c.client_system_no 	, bc.client_version 	= c.client_version 		, bc.account			= c.account				,
			bc.client_ip		= c.client_ip			, bc.create_dt			= c.create_dt			, bc.is_np				= c.is_np		
    	where bc.ci_id = c.ci_id
	</update>	
	
</sqlMap>